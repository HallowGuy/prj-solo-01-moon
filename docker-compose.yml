version: "3.8"

services:
  budibase:
    image: budibase/budibase:2.24.8
    container_name: budibase
    restart: unless-stopped

    ports:
      - "8080:4001"

    environment:
      # Environnement
      NODE_ENV: production
      BUDIBASE_ENV: production

      # URL publique (CRITIQUE pour éviter écran noir)
      PUBLIC_URL: http://localhost:8080

      # Secrets requis
      JWT_SECRET: change-me-jwt-secret
      SESSION_SECRET: change-me-session-secret

      # Création admin au premier démarrage
      ADMIN_EMAIL: admin@local.test
      ADMIN_PASSWORD: Admin123!

      LOG_LEVEL: info

    volumes:
      - budibase_data:/data

volumes:
  budibase_data:
