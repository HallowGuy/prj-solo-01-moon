services:
  budibase:
    image: budibase/budibase:2
    container_name: budibase
    restart: unless-stopped

    ports:
      - "8080:4001"

    environment:
      # Mode standalone OFFICIEL
      BUDIBASE_ENV: production
      NODE_ENV: production

      # URL publique (important pour le frontend)
      PUBLIC_URL: http://localhost:8080

      # Sécurité / chiffrement
      JWT_SECRET: "change-me-super-secret"
      SESSION_SECRET: "change-me-session-secret"

      # Admin bootstrap (créé au premier démarrage)
      ADMIN_EMAIL: admin@local.test
      ADMIN_PASSWORD: Admin123!

      # Logs
      LOG_LEVEL: info

    volumes:
      # Données persistantes (CouchDB, apps, users, configs)
      - budibase_data:/data

volumes:
  budibase_data:
